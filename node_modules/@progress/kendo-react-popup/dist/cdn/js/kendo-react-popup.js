/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("react-dom"),require("prop-types"),require("@progress/kendo-react-common"),require("@progress/kendo-popup-common")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","prop-types","@progress/kendo-react-common","@progress/kendo-popup-common"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).KendoReactPopup={},e.React,e.ReactDOM,e.PropTypes,e.KendoReactCommon,e.KendoPopupCommon)}(this,(function(e,n,t,o,r,i){"use strict";function s(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var l=s(n),c=s(t);const u=(e,n,t)=>{e.style.transitionDuration="",n&&e.classList.remove(...n.split(" ")),t&&e.classList.remove(...t.split(" "))},p="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent),a=(e,n,t,o,i,s)=>{if(0===t)return i();const l=r.classNames(r.uPopup.slide({direction:n,type:o,c:s})),c=r.classNames(r.uPopup.slideActive({direction:n,type:o,c:s})),a=n=>{n.target===e&&(e.removeEventListener("transitionend",a),u(e,l,c),e.style.display="exit"===o?"none":"",i())};e.addEventListener("transitionend",a);const d=e.ownerDocument;if(!d)return;const f=d.defaultView;if(!f)return;const m=()=>{u(e,l,c),"enter"===o&&(e.style.display=""),l&&e.classList.add(...l.split(" ").filter((e=>e))),f.requestAnimationFrame((()=>{e.style.transitionDuration=t+"ms",e.classList.add(...c.split(" ").filter((e=>e)))}))};p?f.requestAnimationFrame(m):m()},d={name:"@progress/kendo-react-popup",productName:"KendoReact",productCodes:["KENDOUIREACT","KENDOUICOMPLETE"],publishDate:0,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-react-ui/components/my-license/"},f=l.createContext((e=>e));function m(e,n){if(e===n)return!0;if(!!e!=!!n)return!1;const t=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(n);if(t.length!==o.length)return!1;for(let o=0;o<t.length;o++){const r=t[o];if(e[r]!==n[r])return!1}return!0}const g=l.forwardRef(((e,n)=>{const t=l.useContext(f).call(void 0,e);r.validatePackage(d);const{collision:o=h.collision,anchorAlign:s=h.anchorAlign,popupAlign:u=h.popupAlign,offset:p=h.offset,animate:g=h.animate,show:v=h.show,margin:w=h.margin,positionMode:y=h.positionMode,appendTo:P,contentKey:A,anchor:b,scale:O,role:C,onKeyDown:D,onPosition:E,onOpen:T,onMouseDownOutside:x,onClose:N,className:L,popupClass:R,id:K,style:z,children:j}=t,k=r.useUnstyled(),M=t.unstyled||k,I=M&&M.uPopup,[q,U]=l.useState({current:"hidden",previous:"hidden",props:{}}),F=e=>{null==window||window.addEventListener("mousedown",Z),H(e),V(e.firstChild,"enter",S),U({...oe,current:"shown",previous:oe.current})},H=e=>{const{width:n,height:t}=e.style;e.style.width=e.offsetWidth+"px",e.style.height=e.offsetHeight+"px";const r=i.alignElement({anchor:b,anchorAlign:s,element:e,elementAlign:u,offset:p,margin:w,positionMode:y,scale:O}),l=i.positionElement({anchor:b,anchorAlign:s,element:e,elementAlign:u,collisions:o,currentLocation:r,margin:w});if(e.style.top=l.offset.top+"px",e.style.left=l.offset.left+"px",e.style.width=n,e.style.height=t,Y.current={fit:l.fit,fitted:l.fitted,flip:l.flip,flipped:l.flipped},E){const e={target:ee.current,flipped:l.flipped,fitted:l.fitted};E.call(void 0,e)}},S=()=>{const e=_.current;e&&(v&&e.classList.add(...r.classNames(r.uPopup.animationContainerShown({c:I})).split(" ").filter((e=>e))),G(e),T&&T.call(void 0,{target:ee.current}))},V=(e,n,t)=>{if(!u)return;let o;const{horizontal:r,vertical:i}=u;o="left"===r&&"center"===i?"right":"right"===r&&"center"===i?"left":"top"===i?"down":"up";Y.current&&Y.current.flipped&&(o={down:"up",up:"down",left:"right",right:"left"}[o]),a(e,o,B()[n],n,t,I)},Z=e=>{var n;const t=null===(null==(n=null==e?void 0:e.target)?void 0:n.closest(".k-animation-container")),o=(null==b?void 0:b.contains(null==e?void 0:e.target))||!1;if(t){if(x){const n={target:ee.current,event:e,state:oe,isAnchorClicked:o};x.call(void 0,n)}null==window||window.removeEventListener("mousedown",Z)}},W=()=>{"hiding"===oe.current&&("shown"===oe.previous||"reposition"===oe.previous)&&U({...oe,current:"hidden",previous:oe.current}),N&&N.call(void 0,{target:ee.current})},B=()=>{const e=g;let n=0,t=0;return e&&(!0===e?n=t=300:(n=e.openDuration||0,t=e.closeDuration||0)),{enter:n,exit:t}},G=e=>{J(),$.current=i.domUtils.scrollableParents(b||e),$.current&&$.current.map((e=>e.addEventListener("scroll",Q))),window.addEventListener("resize",Q)},J=()=>{$.current&&($.current.map((e=>e.removeEventListener("scroll",Q))),$.current=void 0),window.removeEventListener("resize",Q)},Q=function(e,n,t={}){let o,r,i,s,l=0;t=t||{};const c=function(){l=!1===t.leading?0:(new Date).getTime(),o=void 0,s=e.apply(r,i),o||(r=i=null)};return function(){const u=(new Date).getTime();!l&&!1===t.leading&&(l=u);const p=n-(u-l);return r=void 0,i=arguments,p<=0||p>n?(o&&(clearTimeout(o),o=void 0),l=u,s=e.apply(r,i),o||(r=i=null)):!o&&!1!==t.trailing&&(o=window.setTimeout(c,p)),s}}((()=>{"hidden"!==oe.current&&"hiding"!==oe.current&&U({...q,current:"reposition",previous:oe.current})}),16.666666666666668),X=r.useZIndexContext()||0,Y=l.useRef(),$=l.useRef(),_=l.useRef(null),ee=l.useRef(null),ne=l.useRef({}),te=l.useRef(!1);l.useImperativeHandle(ee,(()=>({element:_.current,setPosition:H,props:e}))),l.useImperativeHandle(n,(()=>ee.current));const oe=l.useMemo((()=>{const e={...q,props:{show:v,anchor:b,anchorAlign:s,appendTo:P,collision:o,popupAlign:u,className:L,popupClass:R,style:z,offset:p,contentKey:A}};return v?"hidden"===q.current||"hiding"===q.current?{...e,current:"showing",previous:q.current}:"showing"===q.current?{...e,current:"shown",previous:q.current}:"shown"!==q.current||m(p,q.props.offset)&&m(s,q.props.anchorAlign)&&m(P,q.props.appendTo)&&m(o,q.props.collision)&&m(u,q.props.popupAlign)&&m(z,q.props.style)&&b===q.props.anchor&&R===q.props.popupClass&&L===q.props.className?e:{...e,current:"reposition",previous:q.current}:"hiding"===q.current||"hidden"===q.current?{...e,current:"hidden",previous:q.current}:{...e,current:"hiding",previous:q.current}}),[v,b,s,P,o,u,L,R,z,p,A,q]);l.useEffect((()=>{"hiding"===oe.current&&!te.current&&_.current?(te.current=!0,(e=>{if(!v){const n=M&&M.uPopup;e.classList.remove(...r.classNames(r.uPopup.animationContainerShown({c:n})).split(" ").filter((e=>e)))}J()})(_.current),V(_.current.firstChild,"exit",W)):(te.current=!1,"showing"===oe.current&&_.current?F(_.current):"hiding"===oe.current&&_.current?W():"reposition"===oe.current&&"shown"===oe.previous?setTimeout((()=>{U({...oe,current:"shown",previous:oe.current})}),0):"shown"===oe.current&&ne.current.contentKey!==A&&_.current&&H(_.current)),"reposition"===oe.current&&("shown"===oe.previous||"showing"===oe.previous)&&_.current&&H(_.current),ne.current={contentKey:A}}),[oe]),l.useEffect((()=>("showing"===oe.current&&_.current&&F(_.current),()=>{J()})),[]);const re=P||(r.canUseDOM?b&&b.ownerDocument?b.ownerDocument.body:document.body:void 0),ie=Object.assign({},{position:y,top:0,left:-1e4},z||{}),se="hiding"===oe.current;if((v||se)&&re){const e=X?X+1:100,n=l.createElement(r.ZIndexContext.Provider,{value:e},l.createElement("div",{onKeyDown:D,className:r.classNames(r.uPopup.animationContainer({c:I}),L),id:K,ref:_,style:{zIndex:e,...ie}},l.createElement("div",{className:r.classNames(r.uPopup.animationChild({c:I})),style:{transitionDelay:"0ms"}},l.createElement("div",{role:C,className:r.classNames(r.uPopup.popup({c:I}),R)},j))));return null!==P?c.createPortal(n,re):n}return null})),h={collision:{horizontal:i.Collision.fit,vertical:i.Collision.flip},anchorAlign:{horizontal:i.AlignPoint.left,vertical:i.AlignPoint.bottom},popupAlign:{horizontal:i.AlignPoint.left,vertical:i.AlignPoint.top},offset:{left:-1e3,top:0},animate:!0,show:!1,margin:{horizontal:0,vertical:0},positionMode:"absolute"};g.displayName="Popup",g.propTypes={anchor:function(e){const n=e.anchor;return n&&"number"!=typeof n.nodeType?new Error("Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed."):null},appendTo:function(e){const n=e.appendTo;return n&&"number"!=typeof n.nodeType?new Error("Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed."):null},className:o.oneOfType([o.string,o.arrayOf(o.string.isRequired)]),id:o.string,popupClass:o.oneOfType([o.string,o.arrayOf(o.string),o.object]),collision:o.shape({horizontal:o.oneOf([i.Collision.fit,i.Collision.flip,i.Collision.none]),vertical:o.oneOf([i.Collision.fit,i.Collision.flip,i.Collision.none])}),anchorAlign:o.shape({horizontal:o.oneOf([i.AlignPoint.left,i.AlignPoint.center,i.AlignPoint.right]),vertical:o.oneOf([i.AlignPoint.top,i.AlignPoint.center,i.AlignPoint.bottom])}),popupAlign:o.shape({horizontal:o.oneOf([i.AlignPoint.left,i.AlignPoint.center,i.AlignPoint.right]),vertical:o.oneOf([i.AlignPoint.top,i.AlignPoint.center,i.AlignPoint.bottom])}),offset:o.shape({left:o.number,top:o.number}),children:o.oneOfType([o.element,o.node]),show:o.bool,animate:o.oneOfType([o.bool,o.shape({openDuration:o.number,closeDuration:o.number})]),margin:o.shape({horizontal:o.number,vertical:o.number}),positionMode:o.oneOf(["fixed","absolute"]),scale:o.number,style:o.object,onClose:o.func,onPosition:o.func,onOpen:o.func,onKeyDown:o.func,onMouseDownOutside:o.func},e.Popup=g,e.PopupPropsContext=f}));
