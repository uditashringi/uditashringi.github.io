/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";
import * as t from "react";
import r from "prop-types";
import { validatePackage as w, useUnstyled as H, useCustomComponent as g, useAsyncFocusBlur as p, classNames as h, uTextBox as C } from "@progress/kendo-react-common";
import { packageMetadata as A } from "../package-metadata.mjs";
const B = t.forwardRef((e, F) => {
  w(A);
  const l = t.useRef(null), o = t.useRef(null), a = t.useRef(), i = H(), s = i && i.uTextBox, y = t.useCallback(() => {
    var n;
    return a.current !== void 0 ? a.current : (n = l.current) == null ? void 0 : n.value;
  }, []);
  t.useImperativeHandle(o, () => ({
    get element() {
      return l.current;
    },
    get name() {
      return l.current && l.current.name;
    },
    get value() {
      return y();
    }
  })), t.useImperativeHandle(F, () => o.current);
  const {
    size: c = u.size,
    fillMode: d = u.fillMode,
    rounded: f = u.rounded,
    autoFocus: E = u.autoFocus,
    className: m,
    dir: R,
    style: _,
    prefix: b = u.prefix,
    suffix: M = u.suffix,
    valid: D,
    // Destruct to avoid warning when used inside a form field
    modified: G,
    touched: K,
    visited: U,
    ...N
  } = e, [T] = g(b), [q] = g(M), [v, x] = t.useState(!1), k = (n) => {
    x(!0);
  }, z = (n) => {
    x(!1);
  }, P = t.useCallback(
    (n) => {
      a.current = n.target.value, e.onChange && e.onChange.call(void 0, {
        syntheticEvent: n,
        nativeEvent: n.nativeEvent,
        value: n.target.value,
        target: o.current
      }), a.current = void 0;
    },
    [e.onChange]
  ), { onFocus: S, onBlur: I } = p({
    onFocus: k,
    onBlur: z,
    onSyncFocus: e.onFocus,
    onSyncBlur: e.onBlur
  }), O = t.useMemo(
    () => h(
      C.wrapper({
        c: s,
        rounded: f,
        fillMode: d,
        size: c,
        focused: v,
        required: e.required,
        disabled: e.disabled,
        invalid: e.valid === !1
      }),
      m
    ),
    [m, d, v, e.disabled, e.required, e.valid, f, c, s]
  );
  return /* @__PURE__ */ t.createElement("span", { style: _, dir: R, className: O, onFocus: S, onBlur: I }, /* @__PURE__ */ t.createElement(T, null), /* @__PURE__ */ t.createElement(
    "input",
    {
      ref: l,
      className: h(C.inputInner({ c: s })),
      autoFocus: E,
      ...N,
      "aria-required": e.required,
      onChange: P
    }
  ), /* @__PURE__ */ t.createElement(q, null));
}), u = {
  prefix: (e) => null,
  suffix: (e) => null,
  size: "medium",
  rounded: "medium",
  fillMode: "solid",
  autoFocus: !1
};
B.propTypes = {
  size: r.oneOf([null, "small", "medium", "large"]),
  rounded: r.oneOf([null, "small", "medium", "large", "full"]),
  fillMode: r.oneOf([null, "solid", "flat", "outline"]),
  autoFocus: r.bool
};
B.displayName = "KendoReactTextBoxComponent";
export {
  B as TextBox
};
