/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const W=require("react"),C=require("prop-types"),l=require("@progress/kendo-react-common"),h=require("../messages/index.js"),Y=require("@progress/kendo-react-intl"),r=require("./range-raducer.js"),F=require("../package-metadata.js");function J(n){const s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const d in n)if(d!=="default"){const e=Object.getOwnPropertyDescriptor(n,d);Object.defineProperty(s,d,e.get?e:{enumerable:!0,get:()=>n[d]})}}return s.default=n,Object.freeze(s)}const a=J(W),Q=(n,s,d)=>{const[e,i]=a.useState(n),m=a.useCallback(g=>{const v=r.rangeReducer(s.state||e,{...g,...s});d&&d(v,g.event),i(v)},[s,d]);return[e,m]},S=l.createPropsContext(),x=a.forwardRef((n,s)=>{l.validatePackage(F.packageMetadata);const d=l.usePropsContext(S,n),e={step:k.step,largeStep:k.largeStep,defaultValue:k.defaultValue,vertical:k.vertical,disabled:k.disabled,...d},i=a.useRef(null),m=a.useRef(null),g=a.useRef(null),v=a.useRef(null),D=a.useRef(null),w=a.useCallback(()=>{v.current&&v.current.focus()},[v]);a.useImperativeHandle(i,()=>({element:m.current,focus:w,props:e})),a.useImperativeHandle(s,()=>i.current);const f=a.useMemo(()=>e.min,[e.min]),y=a.useMemo(()=>e.max,[e.max]),K=a.useMemo(()=>e.step!==void 0?e.step:k.step,[e.step,k.step]),$=a.useMemo(()=>e.largeStep!==void 0?e.largeStep:k.largeStep,[e.largeStep,k.largeStep]),u=l.useDir(m,e.dir),M=(t,p)=>{e.onChange&&i.current&&e.onChange.call(void 0,{value:t,target:i.current,syntheticEvent:p})},[O,_]=a.useState(""),[N,c]=Q(e.defaultValue||k.defaultValue,{min:f,max:y,step:K,largeStep:$,state:e.value},M),o=a.useMemo(()=>e.value||N,[e.value,N]),L=a.useRef(null),T=a.useRef(null),A=a.useMemo(()=>(o.start-f)/(y-f)*100,[o.start,f,y]),R=a.useMemo(()=>(o.end-f)/(y-f)*100,[o.end,f,y]),P=a.useMemo(()=>e.vertical?{paddingTop:0,height:"100%"}:{},[e.vertical]),z=a.useMemo(()=>e.vertical?{marginTop:"0.5rem",marginBottom:"0.5rem"}:{marginLeft:"0.5rem",marginRight:"0.5rem"},[e.vertical]),G=Y.useLocalization(),I=a.useCallback(t=>{if(!T.current)return;const p=T.current.getBoundingClientRect(),b=e.vertical?p.bottom-t.clientY:u==="rtl"?p.right-t.clientX:t.clientX-p.left,E=e.vertical?p.height:p.width,X=b/E;return f+X*(y-f)},[T,e.vertical,u,f,y,N.start,N.end,e.value&&e.value.start,e.value&&e.value.end]),V=a.useCallback(t=>t<=o.start?"start":t>=o.end?"end":2*t<o.end+o.start?"start":"end",[N.start,N.end,e.value&&e.value.start,e.value&&e.value.end]),q=a.useCallback(t=>{switch(t.keyCode){case l.Keys.right:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.decrease:r.RANGE_ACTION.increase,key:"start",event:t});break;case l.Keys.up:t.preventDefault(),c({type:r.RANGE_ACTION.increase,key:"start",event:t});break;case l.Keys.left:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.increase:r.RANGE_ACTION.decrease,key:"start",event:t});break;case l.Keys.down:t.preventDefault(),c({type:r.RANGE_ACTION.decrease,key:"start",event:t});break;case l.Keys.home:t.preventDefault(),c({type:r.RANGE_ACTION.min,key:"start",event:t});break;case l.Keys.end:t.preventDefault(),c({type:r.RANGE_ACTION.max,key:"start",event:t});break;case l.Keys.pageDown:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.increaseLarge:r.RANGE_ACTION.decreaseLarge,key:"start",event:t});break;case l.Keys.pageUp:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.decreaseLarge:r.RANGE_ACTION.increaseLarge,key:"start",event:t});break}},[c]),j=a.useCallback(t=>{switch(t.keyCode){case l.Keys.right:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.decrease:r.RANGE_ACTION.increase,key:"end",event:t});break;case l.Keys.up:t.preventDefault(),c({type:r.RANGE_ACTION.increase,key:"end",event:t});break;case l.Keys.left:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.increase:r.RANGE_ACTION.decrease,key:"end",event:t});break;case l.Keys.down:t.preventDefault(),c({type:r.RANGE_ACTION.decrease,key:"end",event:t});break;case l.Keys.home:t.preventDefault(),c({type:r.RANGE_ACTION.min,key:"end",event:t});break;case l.Keys.end:t.preventDefault(),c({type:r.RANGE_ACTION.max,key:"end",event:t});break;case l.Keys.pageDown:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.increaseLarge:r.RANGE_ACTION.decreaseLarge,key:"end",event:t});break;case l.Keys.pageUp:t.preventDefault(),c({type:u==="rtl"?r.RANGE_ACTION.decreaseLarge:r.RANGE_ACTION.increaseLarge,key:"end",event:t});break}},[c,u]),H=a.useCallback(t=>{const p=I(t),b=V(p);_(b),b==="end"?D.current.focus():v.current.focus();const E=b==="end"?r.RANGE_ACTION.end:r.RANGE_ACTION.start;c({type:E,payload:p,event:t})},[e.vertical,f,y,c]),B=t=>{const p=I(t),b=O==="end"?r.RANGE_ACTION.end:r.RANGE_ACTION.start;c({type:b,payload:p,event:t})},U=t=>{const p=I(t),b=O==="end"?r.RANGE_ACTION.end:r.RANGE_ACTION.start;c({type:b,payload:p,event:t}),_("")};return l.useDraggable(T,{onPress:H,onDrag:B,onRelease:U},{autoScroll:!1}),a.createElement("div",{id:e.id,style:e.style,ref:m,dir:u,className:l.classNames("k-slider",{"k-rtl":u==="rtl","k-disabled":e.disabled,"k-slider-vertical":e.vertical,"k-slider-horizontal":!e.vertical},e.className)},a.createElement("div",{ref:T,className:"k-slider-track-wrap",style:{flexGrow:1,position:"relative",touchAction:"none",...z}},e.children&&a.createElement("ul",{className:"k-reset k-slider-items",style:{...P}},a.Children.map(e.children,(t,p)=>t&&a.cloneElement(t,{position:100*(t.props.position-e.min)/(e.max-e.min),vertical:e.vertical,firstTick:p===0,lastTick:p===a.Children.count(e.children)-1},t.props.children))),a.createElement("div",{ref:L,className:"k-slider-track",style:e.vertical?{bottom:0,height:"100%"}:{[u==="rtl"?"right":"left"]:0,width:"100%"}},A!==null&&R!==null&&a.createElement("div",{"data-selection":!0,ref:g,title:`${o.start} - ${o.end}`,className:"k-slider-selection",style:e.vertical?{height:R-A+"%",bottom:A+"%"}:{[u==="rtl"?"right":"left"]:A+"%",width:R-A+"%"}}),a.createElement("span",{ref:v,role:"slider",tabIndex:l.getTabIndex(e.startTabIndex,e.disabled,void 0),"aria-valuemin":f,"aria-valuemax":Math.max(y,o.end),"aria-valuenow":o.start,"aria-disabled":e.disabled?"true":void 0,"aria-valuetext":`${o.start} - ${o.end}`,className:"k-draghandle k-draghandle-start",title:G.toLanguageString(h.sliderDragTitle,h.messages[h.sliderDragTitle]),style:e.vertical?{bottom:"calc("+A+"%)",zIndex:1}:u==="rtl"?{right:"calc("+A+"% - 13px)",zIndex:1}:{left:"calc("+A+"%)",zIndex:1},onKeyDown:q}),a.createElement("span",{ref:D,role:"slider",tabIndex:l.getTabIndex(e.endTabIndex,e.disabled,void 0),"aria-valuemin":Math.min(f,o.start),"aria-valuemax":y,"aria-valuenow":o.end,"aria-disabled":e.disabled?"true":void 0,"aria-valuetext":`${o.start} - ${o.end}`,className:"k-draghandle k-draghandle-end",title:G.toLanguageString(h.sliderDragTitle,h.messages[h.sliderDragTitle]),style:e.vertical?{bottom:"calc("+R+"%)",zIndex:1}:u==="rtl"?{right:"calc("+R+"% - 13px)",zIndex:1}:{left:"calc("+R+"%)",zIndex:1},onKeyDown:j}))))}),Z={value:(n,s,d)=>{if(n.value){const e=n.value.start,i=n.value.end,m=n.min,g=n.max;if(e>i||e>g||e<m||i>g||i<m||i<e)return new Error(`Invalid prop + ${s} supplied to ${d}.
                    The { start, end } value must be between the min & max value and { start, end } must be start < end.
                    `)}return null},defaultValue:(n,s,d)=>{if(n.defaultValue){const e=n.defaultValue.start,i=n.defaultValue.end,m=n.min,g=n.max;if(e>i||e>g||e<m||i>g||i<m||i<e)return new Error(`Invalid prop + ${s} supplied to ${d}.
                    The { start, end } value must be between the min & max value and { start, end } must be start < end.
                    `)}return null},onChange:C.func,step:C.number,min:(n,s,d)=>{const e=n[s],i=n.min,m=n.max;return i===void 0?new Error(`Invalid prop + ${s} supplied to ${d}.
                ${s} value can not be undefined.
                `):e&&i>=m?new Error(`Invalid prop + ${s} supplied to ${d}.
                ${s} value can not be equal to or bigger than the max value.
                `):null},max:(n,s,d)=>{const e=n[s],i=n.min,m=n.max;return m===void 0?new Error(`Invalid prop + ${s} supplied to ${d}.
                ${s} value can not be undefined.
                `):e&&m<=i?new Error(`Invalid prop + ${s} supplied to ${d}.
                ${s} value can not be equal to or smaller than the min value.
                `):null},vertical:C.bool,disabled:C.bool,dir:C.oneOf(["ltr","rtl"])},k={step:1,largeStep:10,defaultValue:{start:0,end:0},vertical:!1,disabled:!1};x.displayName="KendoReactRangeSlider";x.propTypes=Z;exports.RangeSlider=x;exports.RangeSliderPropsContext=S;
