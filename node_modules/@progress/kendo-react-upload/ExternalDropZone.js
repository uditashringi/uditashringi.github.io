/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const w=require("react"),r=require("prop-types"),g=require("@progress/kendo-react-common"),C=require("@progress/kendo-svg-icons"),k=require("@progress/kendo-react-intl"),a=require("./messages/index.js"),q=require("./package-metadata.js");function H(e){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const l in e)if(l!=="default"){const o=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(i,l,o.get?o:{enumerable:!0,get:()=>e[l]})}}return i.default=e,Object.freeze(i)}const n=H(w),O=100,E=n.forwardRef((e,i)=>{g.validatePackage(q.packageMetadata);const l=n.useRef(null),o=n.useRef(null),d=n.useRef(null),f=n.useRef(!1),u=n.useRef(null),{uploadRef:c}=e,D=c.current,[R,v]=n.useState(!1),b=n.useMemo(()=>new k.IntlService("en"),[]),m=k.useLocalization(),x=m.toLanguageString(a.dropZoneHint,a.messages[a.dropZoneHint]),[N,I]=n.useState(m.toLanguageString(a.dropZoneNote,a.messages[a.dropZoneNote])),y=e.customHint||n.createElement("span",null,x),z=e.customNote||n.createElement("span",null,N),S=n.useCallback(()=>{o.current&&o.current.focus()},[o]);n.useImperativeHandle(l,()=>({element:o.current,focus:S,props:e})),n.useImperativeHandle(i,()=>l.current),n.useEffect(()=>{if(D){const t=D.props.restrictions.allowedExtensions;if(t&&t.length){const s=b.format(m.toLanguageString(a.restrictionsDropZoneNote,a.messages[a.restrictionsDropZoneNote]),[t]);I(s)}}},[D,m,b]);const p=n.useCallback(t=>new Date().getTime()-(t||new Date).getTime()>O,[]),T=n.useCallback(t=>{t.preventDefault();const s=t.dataTransfer.files;s.length>0&&!e.disabled&&c&&c.current&&(c.current.onAdd&&(t.preventDefault(),c.current.onAdd(s)),e.onDrop&&e.onDrop.call(void 0,t))},[e.disabled,c,e.onDrop]),Z=n.useCallback(t=>{if(f){f.current=!0;const s=()=>{p(u.current)&&(v(!1),f.current=!1,clearInterval(d.current),d.current=null,u.current=null)};d.current=setInterval(s,O)}e.onElementDragEnter&&e.onElementDragEnter.call(void 0,t)},[f,d,u,p,e.onElementDragEnter]),h=n.useCallback(t=>{t.preventDefault(),u.current=new Date,v(!0),e.onElementDragOver&&e.onElementDragOver.call(void 0,t)},[u,e.onElementDragOver]);return n.createElement("div",{ref:o,id:e.id,className:g.classNames("k-external-dropzone",{"k-external-dropzone-hover":R,"k-disabled":e.disabled},e.className),tabIndex:g.getTabIndex(e.tabIndex,e.disabled,void 0),onDrop:T,onDragEnter:Z,onDragOver:h},n.createElement("div",{style:e.style,className:"k-dropzone-inner"},n.createElement(g.IconWrap,{name:"upload",icon:C.uploadIcon,className:"k-dropzone-icon",size:"xxxlarge"}),n.createElement("span",{className:"k-dropzone-hint"},y),n.createElement("span",{className:"k-dropzone-note"},z)))}),M={id:r.string,tabIndex:r.number,editorRef:r.oneOfType([r.func,r.shape({current:r.any})]),disabled:r.bool,onDrop:r.func,onElementDragEnter:r.func,onElementDragOver:r.func};E.displayName="KendoReactExternalDropZone";E.propTypes=M;exports.ExternalDropZone=E;
