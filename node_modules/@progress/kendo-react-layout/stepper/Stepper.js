/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const te=require("react"),o=require("prop-types"),ne=require("./context/StepperContext.js"),d=require("@progress/kendo-react-common"),se=require("./Step.js"),oe=require("@progress/kendo-react-progressbars"),z=require("./contants.js"),re=require("../package-metadata.js"),ae=require("@progress/kendo-react-intl"),O=require("./messages/index.js");function ie(m){const k=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(m){for(const p in m)if(p!=="default"){const h=Object.getOwnPropertyDescriptor(m,p);Object.defineProperty(k,p,h.get?h:{enumerable:!0,get:()=>m[p]})}}return k.default=m,Object.freeze(k)}const e=ie(te),T=e.forwardRef((m,k)=>{d.validatePackage(re.packageMetadata);const{animationDuration:p,children:h,className:D,disabled:g,errorIcon:V,errorSVGIcon:j,item:P,items:b,linear:y,mode:_,orientation:S,selectOnFocus:E,style:w,successIcon:K,successSVGIcon:G,value:i=0,onChange:C,onFocus:N}=m,B=ae.useLocalization().toLanguageString(O.progBarAriaLabel,O.messages[O.progBarAriaLabel]),v=e.useRef(null),M=e.useCallback(()=>{v.current&&d.focusFirstFocusableChild(v.current)},[]),x=e.useCallback(()=>({element:v.current,focus:M}),[M]);e.useImperativeHandle(k,x);const[H,u]=e.useState(i),f=b?b.length:0,s=S==="vertical",R=d.useDir(v,m.dir),U=typeof p=="number"?p:p!==!1?z.DEFAULT_ANIMATION_DURATION:z.NO_ANIMATION;e.useEffect(()=>{u(i)},[i]);const q=e.useCallback((a,r)=>{const t=r===i-1,n=r===i,c=r===i+1;i!==r&&C&&!g&&(!y||t||n||c)&&(d.dispatchEvent(C,a,x(),{value:r}),u(r))},[i,y,C,g,u]),J=e.useCallback(a=>{const r=a.value,t=a.syntheticEvent;q(t,r)},[q]),Q=e.useCallback(a=>{N&&!g&&d.dispatchEvent(N,a.syntheticEvent,x(),void 0)},[N,g]),I=e.useMemo(()=>{const a=R==="rtl",r=b.length-1;return new d.Navigation({root:v,selectors:["ol.k-step-list li.k-step a.k-step-link"],tabIndex:0,keyboardEvents:{keydown:{Tab:(t,n,c)=>{c.preventDefault();const l=n.elements.indexOf(t),L=n.previous(t).children[0],A=n.next(t).children[0];c.shiftKey?!a&&l>0?(n.focusPrevious(t),u(l-1),E&&L.click()):a&&l<r&&(n.focusNext(t),u(l+1),E&&A.click()):!a&&l<r?(n.focusNext(t),u(l+1),E&&A.click()):a&&l>0&&(n.focusPrevious(t),u(l-1),E&&L.click())},Home:(t,n,c)=>{c.preventDefault(),n.focusElement(n.first,t),u(0)},End:(t,n,c)=>{c.preventDefault(),n.focusElement(n.last,t),u(r)},Space:(t,n,c)=>{c.preventDefault(),t.children[0].click()},Enter:(t,n,c)=>{c.preventDefault(),t.children[0].click()}}}})},[R,b.length,u,E]);e.useEffect(()=>(I.initializeRovingTab(i),()=>I.removeFocusListener()),[]);const W=e.useCallback(I.triggerKeyboardEvent.bind(I),[]),X=e.useMemo(()=>d.classNames("k-stepper",{"k-stepper-linear":y},D),[y,D]),Y=e.useMemo(()=>({display:"grid",gridTemplateColumns:s?void 0:"repeat("+f*2+", 1fr)",gridTemplateRows:s?"repeat("+f+", 1fr)":void 0,...w}),[s,f,w]),Z=e.useMemo(()=>d.classNames("k-step-list",{"k-step-list-horizontal":!s,"k-step-list-vertical":s}),[s]),$=e.useMemo(()=>({gridColumnStart:s?void 0:1,gridColumnEnd:s?void 0:-1,gridRowStart:s?1:void 0,gridRowEnd:s?-1:void 0}),[s]),ee=e.useMemo(()=>({gridColumnStart:s?void 0:2,gridColumnEnd:s?void 0:f*2,gridRowStart:s?1:void 0,gridRowEnd:s?f:void 0,top:s?17:void 0}),[s,f]),F=b&&b.map((a,r)=>{const t={index:r,disabled:g||a.disabled,focused:r===H,current:r===i,...a},n=P||se.Step;return e.createElement(n,{key:r,...t})});return e.createElement(ne.StepperContext.Provider,{value:{animationDuration:p,isVertical:s,item:P,linear:y,mode:_,numOfSteps:f,value:i,successIcon:K,successSVGIcon:G,errorIcon:V,errorSVGIcon:j,onChange:J,onFocus:Q}},e.createElement("nav",{className:X,style:Y,dir:R,role:"navigation",ref:v,onKeyDown:W},e.createElement("ol",{className:Z,style:$},F||h),e.createElement(oe.ProgressBar,{style:ee,labelPlacement:"start",animation:{duration:U},ariaLabel:B,"aria-hidden":!0,max:f-1,labelVisible:!1,orientation:S,reverse:S==="vertical",value:i,disabled:g,tabIndex:-1})))});T.propTypes={animationDuration:o.oneOfType([o.bool,o.number]),children:o.any,className:o.string,dir:o.string,disabled:o.bool,errorIcon:o.string,errorSVGIcon:d.svgIconPropType,item:o.any,items:o.any,linear:o.bool,mode:o.oneOf(["steps","labels"]),orientation:o.oneOf(["horizontal","vertical"]),style:o.object,successIcon:o.string,successSVGIcon:d.svgIconPropType,value:o.number.isRequired,onChange:o.func,onFocus:o.func};T.displayName="KendoStepper";exports.Stepper=T;
