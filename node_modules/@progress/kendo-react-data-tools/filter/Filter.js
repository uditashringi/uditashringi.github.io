/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("react"),p=require("prop-types"),l=require("@progress/kendo-react-common"),h=require("./Group.js"),w=require("../package-metadata.js");function R(d){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(d){for(const r in d)if(r!=="default"){const t=Object.getOwnPropertyDescriptor(d,r);Object.defineProperty(o,r,t.get?t:{enumerable:!0,get:()=>d[r]})}}return o.default=d,Object.freeze(o)}const f=R(v),c={andButton:"button.k-group-start",orButton:"button.k-group-end",addFilterButton:'button[title="Add Expression"]',addGroupButton:'button[title="Add Group"]',removeButton:'button[title="Remove"]',filterFieldWrapper:".k-filter-field",filterOperatorWrapper:".k-filter-operator",filterValueWrapper:".k-filter-value",toolbarElement:".k-toolbar"},b=class b extends f.Component{constructor(o){super(o),this.wrapperRef=f.createRef(),this.onFilterChange=r=>{const t={filter:r.nextFilter,syntheticEvent:r.syntheticEvent,nativeEvent:r.nativeEvent,target:this};this.props.onChange.call(void 0,t)},this.onGroupRemove=r=>{const t={filter:{...this.props.value,filters:[]},syntheticEvent:r.syntheticEvent,nativeEvent:r.nativeEvent,target:this};this.props.onChange.call(void 0,t)},this.onKeyDown=r=>{var t;(t=this.navigation)==null||t.triggerKeyboardEvent(r)},l.validatePackage(w.packageMetadata)}componentDidMount(){this.wrapperRef&&(this.navigation=new l.Navigation({tabIndex:0,root:this.wrapperRef,selectors:[".k-filter"],keyboardEvents:{keydown:{Tab:(o,r,t)=>{const e=o.getElementsByClassName("k-filter-lines")[0];e&&l.disableNavigatableContainer(e)},ArrowUp:(o,r,t)=>{t.preventDefault();const e=l.getActiveElement(document),i=e==null?void 0:e.closest(c.toolbarElement),n=o.getElementsByClassName("k-toolbar"),s=Array.from(n).findIndex(m=>m===i)-1,u=n[s];o.getElementsByClassName("k-filter-lines")[0]&&l.focusFirstFocusableChild(u)},ArrowDown:(o,r,t)=>{t.preventDefault();const e=l.getActiveElement(document),i=e==null?void 0:e.closest(c.toolbarElement),n=o.getElementsByClassName("k-toolbar"),s=Array.from(n).findIndex(m=>m===i)+1,u=n[s],a=o.getElementsByClassName("k-filter-lines")[0];a&&(l.enableNavigatableContainer(a,[c.filterFieldWrapper,c.filterOperatorWrapper,c.filterValueWrapper]),l.focusFirstFocusableChild(u))},ArrowRight:(o,r,t)=>{t.preventDefault();const e=l.getActiveElement(document),i=e==null?void 0:e.nextElementSibling,n=e==null?void 0:e.closest(c.toolbarElement),s=o.querySelector('[aria-label="Filter toolbar"]');e&&i&&!(n===s)&&i.focus()},ArrowLeft:(o,r,t)=>{t.preventDefault();const e=l.getActiveElement(document),i=e==null?void 0:e.previousElementSibling,n=e==null?void 0:e.closest(c.toolbarElement),s=o.querySelector('[aria-label="Filter toolbar"]');e&&i&&!(n===s)&&i.focus()},Enter:(o,r,t)=>{t.preventDefault();const e=l.getActiveElement(document),i=o.querySelector(c.removeButton),n=e==null?void 0:e.closest(c.toolbarElement),s=o.getElementsByClassName("k-toolbar"),u=Array.from(s).findIndex(a=>a===n)-1;if(n===s[0]){const a=n.lastElementChild;a&&a.click()}if(n!==s[0]){const a=s[u].lastElementChild;e&&e.title===i.title&&a&&(e.click(),a.focus())}}}}}))}render(){return f.createElement("div",{className:l.classNames("k-filter",this.props.className),style:this.props.style,ref:this.wrapperRef,onKeyDown:this.onKeyDown},f.createElement("ul",{role:"tree",className:"k-filter-container","aria-label":this.props.ariaLabel},f.createElement("li",{role:"treeitem",className:"k-filter-group-main"},f.createElement(h.Group,{filter:this.props.value,fields:this.props.fields,ariaLabel:this.props.ariaLabelGroup,ariaLabelExpression:this.props.ariaLabelExpression,onChange:this.onFilterChange,onRemove:this.onGroupRemove,defaultGroupFilter:this.props.defaultGroupFilter||{logic:"and",filters:[]}}))))}};b.propTypes={className:p.string,style:p.object,fields:function(o,r){const t=o[r];if(t===void 0)return new Error(`Property '${r}' is missing.`);if(Array.isArray(t)){if(Object.keys(t.reduce((e,i)=>({...e,[i.name]:1}),{})).length!==t.length)return new Error(`Property '${r}' needs to contain objects with unique 'name' field.`)}else return new Error(`Property '${r}' needs to be Array<FieldSettings>.`);return null},ariaLabelGroup:p.string,ariaLabelExpression:p.string,value:p.object.isRequired,onChange:p.func.isRequired};let g=b;exports.Filter=g;exports.selectors=c;
