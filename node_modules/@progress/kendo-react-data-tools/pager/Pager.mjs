/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";
import * as n from "react";
import s from "prop-types";
import { PagerNumericButtons as ke } from "./PagerNumericButtons.mjs";
import { PagerInput as ze } from "./PagerInput.mjs";
import { PagerPageSizes as De } from "./PagerPageSizes.mjs";
import { Button as Le } from "@progress/kendo-react-buttons";
import { pagerFirstPage as we, pagerPreviousPage as Ke, pagerNextPage as xe, pagerLastPage as Be, pagerInfo as Oe, pagerAriaKeyshortcuts as Te, pagerPage as qe, pagerOf as Ae, pagerTotalPages as _e } from "../messages/index.mjs";
import { useLocalization as Fe, useInternationalization as $e } from "@progress/kendo-react-intl";
import { validatePackage as Ve, classNames as J, kendoThemeMaps as Ge, Keys as l, focusFirstFocusableChild as He, enableNavigatableContainer as We, disableNavigatableContainer as je, keepFocusInContainer as Ue, TABBABLE_ELEMENTS as Je } from "@progress/kendo-react-common";
import { packageMetadata as Qe } from "../package-metadata.mjs";
import { getL10NMessage as u, translateMessage as S, getFirstButtonProps as Xe, getPrevButtonProps as Ye, getNextButtonProps as Ze, getLastButtonProps as et } from "./utils.mjs";
const Q = 600, tt = 768, X = n.forwardRef((g, Y) => {
  Ve(Qe);
  const {
    buttonCount: x = P.buttonCount,
    info: Z = P.info,
    type: ee = P.type,
    size: d = P.size,
    disabled: b = P.disabled,
    total: C,
    skip: N,
    take: v,
    className: te,
    style: se,
    pageSizes: B,
    pageSizeValue: ae,
    previousNext: ne,
    responsive: M,
    messagesMap: r,
    dir: O,
    navigatable: m
  } = g, i = Fe(), k = $e(), p = n.useRef({ element: null, props: g }), h = n.useRef(null);
  n.useImperativeHandle(
    p,
    () => ({
      get element() {
        return re();
      },
      props: g
    })
  ), n.useImperativeHandle(Y, () => p.current);
  const re = () => h.current, [T, z] = n.useState(!0), [oe, q] = n.useState(!0);
  n.useEffect(() => (window.addEventListener("resize", D), D(), () => {
    window.removeEventListener("resize", D);
  }), []);
  const y = O === "rtl", o = Math.floor(N / v) + 1, c = Math.ceil((C || 0) / v), f = (t, e) => {
    g.onPageChange && t > 0 && t <= c && g.onPageChange({
      target: p.current,
      skip: (t - 1) * g.take,
      take: g.take,
      syntheticEvent: e,
      nativeEvent: e.nativeEvent,
      targetEvent: e
    });
  }, ie = (t) => {
    const e = h.current, a = t.keyCode;
    !e || !m || ((a === l.home || t.metaKey && a === l.left) && f(1, t), (a === l.end || t.metaKey && a === l.right) && f(c, t), document.activeElement === e ? (a === l.enter && (He(e), We(e)), (a === l.left || a === l.up) && f(o - 1, t), (a === l.right || a === l.down) && f(o + 1, t)) : (a === l.esc && (e.focus(), je(e)), Ue(t, e, Je)));
  }, D = () => {
    const t = h.current;
    if (!t || !M)
      return;
    const e = t.offsetWidth;
    e < Q ? z(!1) : e >= Q && e < tt ? (q(!1), z(!0)) : (q(!0), z(!0));
  }, le = (t, e) => {
    const a = {
      target: p == null ? void 0 : p.current,
      syntheticEvent: e.syntheticEvent,
      nativeEvent: e.nativeEvent,
      targetEvent: e,
      ...t
    };
    g.onPageChange && g.onPageChange(a);
  }, ge = u(we, r), ue = u(Ke, r), ce = u(xe, r), de = u(Be, r), A = u(Oe, r), _ = u(Te, r), F = u(qe, r), $ = u(Ae, r), E = u(_e, r), fe = `${i.toLanguageString(
    F.messageKey,
    F.defaultMessage
  )} ${k.format(i.toLanguageString(E.messageKey, E.defaultMessage), [
    o
  ])} ${i.toLanguageString($.messageKey, $.defaultMessage)} ${k.format(
    i.toLanguageString(E.messageKey, E.defaultMessage),
    [c]
  )}`, I = (t, e, a, L, w, K) => /* @__PURE__ */ n.createElement(
    Le,
    {
      fillMode: "flat",
      themeColor: "base",
      size: d,
      rounded: null,
      className: e,
      icon: L,
      svgIcon: w,
      title: a,
      role: "button",
      "aria-disabled": K,
      tabIndex: m ? -1 : void 0,
      onClick: (R) => {
        R.preventDefault(), f(t, R);
      }
    }
  ), V = B && /* @__PURE__ */ n.createElement(
    De,
    {
      pageChange: le,
      pageSize: v,
      pageSizes: B,
      value: ae,
      messagesMap: r,
      size: d,
      navigatable: m
    }
  ), G = Z && /* @__PURE__ */ n.createElement("span", { className: "k-pager-info" }, k.format(i.toLanguageString(A.messageKey, A.defaultMessage), [
    Math.min(N + 1, C),
    Math.min(N + v, C),
    C
  ])), me = ee === "numeric" ? /* @__PURE__ */ n.createElement(
    ke,
    {
      type: M && !T ? "dropdown" : "numbers",
      buttonCount: x || 0,
      totalPages: c,
      currentPage: o,
      pageChange: f,
      messagesMap: r,
      size: d,
      navigatable: m
    }
  ) : /* @__PURE__ */ n.createElement(
    ze,
    {
      buttonCount: x || 0,
      totalPages: c,
      currentPage: o,
      pageChange: f,
      messagesMap: r,
      size: d,
      navigatable: m
    }
  );
  let H, W, j, U;
  if (ne) {
    const t = S(i, ge), {
      rtlClass: e,
      rtlIcon: a,
      isDisabledClass: L,
      isDisabled: w
    } = Xe(y, o, b);
    H = I(1, L, t, e, a, w);
    const K = S(i, ue), {
      rtlClass: R,
      rtlIcon: pe,
      isDisabledClass: be,
      isDisabled: Pe
    } = Ye(y, o, b);
    W = I(o - 1, be, K, R, pe, Pe);
    const Ce = S(i, ce), {
      rtlClass: ve,
      rtlIcon: Me,
      isDisabledClass: he,
      isDisabled: ye
    } = Ze(y, o, c, b);
    j = I(o + 1, he, Ce, ve, Me, ye);
    const Ee = S(i, de), {
      rtlClass: Ie,
      rtlIcon: Re,
      isDisabledClass: Se,
      isDisabled: Ne
    } = et(y, o, c, b);
    U = I(c, Se, Ee, Ie, Re, Ne);
  }
  return /* @__PURE__ */ n.createElement(
    "div",
    {
      ref: h,
      className: J(
        "k-pager",
        {
          [`k-pager-${Ge.sizeMap[d] || d}`]: d,
          "k-disabled": b
        },
        te
      ),
      style: se,
      role: "application",
      "aria-roledescription": "pager",
      dir: O,
      "aria-keyshortcuts": i.toLanguageString(
        _.messageKey,
        _.defaultMessage
      ),
      "aria-label": fe,
      tabIndex: m ? 0 : void 0,
      onKeyDown: ie
    },
    /* @__PURE__ */ n.createElement("div", { className: J("k-pager-numbers-wrap") }, H, W, me, j, U),
    M ? T && V : V,
    M ? oe && G : G
  );
}), P = {
  buttonCount: 10,
  info: !0,
  type: "numeric",
  size: "medium",
  disabled: !1
};
X.displayName = "Pager";
X.propTypes = {
  className: s.string,
  style: s.object,
  total: s.number.isRequired,
  skip: s.number.isRequired,
  take: s.number.isRequired,
  buttonCount: s.number,
  info: s.bool,
  type: s.oneOf(["numeric", "input"]),
  pageSizes: s.oneOfType([
    s.arrayOf(s.number.isRequired),
    s.arrayOf(s.oneOfType([s.number.isRequired, s.string.isRequired]).isRequired)
  ]),
  previousNext: s.bool,
  onPageChange: s.func,
  messagesMap: s.func,
  size: s.oneOf([null, "small", "medium", "large"]),
  dir: s.string,
  disabled: s.bool
};
export {
  X as Pager
};
